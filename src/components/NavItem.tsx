"use client";

import { Dispatch } from "react";
import type { Menu } from "@/types";

function NavItem({
  num,
  currentOpen,
  setCurrentOpen,
  menu,
}: {
  num: number;
  currentOpen: null | number;
  setCurrentOpen: Dispatch<null | number>;
  menu: Menu;
}) {
  const isOpen = num === currentOpen;

  function handleCurrentOpen() {
    setCurrentOpen(isOpen ? null : num);
  }

  return (
    <li className="border-b border-[#c8bdb8]">
      <div
        className="flex justify-between items-center h-20"
        onClick={handleCurrentOpen}
      >
        <h3 className={`duration-300 ${isOpen ? "text-[#d93751]" : ""}`}>
          {menu.title}
        </h3>
        {menu.dropdowns && (
          <div>
            {isOpen ? (
              <svg viewBox="0 0 10 10" className="w-2.5 h-2.5 fill-[#d93751]">
                <g transform="translate(-.333333 -.333333)">
                  <path d="m10.0473785.61928813c.2603496.26034952.2603496.68245951 0 .94280904l-3.77135252 3.77092881 3.77135252 3.77154352c.2603496.26034953.2603496.68245951 0 .942809-.26034949.2603496-.68245947.2603496-.942809 0l-3.77154352-3.77135252-3.77092881 3.77135252c-.26034953.2603496-.68245952.2603496-.94280904 0-.26034953-.26034949-.26034953-.68245947 0-.942809l3.77073785-3.77154352-3.77073785-3.77092881c-.26034953-.26034953-.26034953-.68245952 0-.94280904.26034952-.26034953.68245951-.26034953.94280904 0l3.77092881 3.77073785 3.77154352-3.77073785c.26034953-.26034953.68245951-.26034953.942809 0z"></path>
                  <path d="m10.0473785.61928813c.2603496.26034952.2603496.68245951 0 .94280904l-3.77135252 3.77092881 3.77135252 3.77154352c.2603496.26034953.2603496.68245951 0 .942809-.26034949.2603496-.68245947.2603496-.942809 0l-3.77154352-3.77135252-3.77092881 3.77135252c-.26034953.2603496-.68245952.2603496-.94280904 0-.26034953-.26034949-.26034953-.68245947 0-.942809l3.77073785-3.77154352-3.77073785-3.77092881c-.26034953-.26034953-.26034953-.68245952 0-.94280904.26034952-.26034953.68245951-.26034953.94280904 0l3.77092881 3.77073785 3.77154352-3.77073785c.26034953-.26034953.68245951-.26034953.942809 0z">
                    <path
                      d="m0 0h16v16h-16z"
                      transform="translate(-2.666667 -2.666667)"
                    ></path>
                  </path>
                </g>
              </svg>
            ) : (
              <svg viewBox="0 0 12 7" className="w-3 h-3 fill-[#4c433f]">
                <path d="M0.295367042,0.295011084 C0.689189766,-0.0983370279 1.32770256,-0.0983370279 1.72152528,0.295011084 L6,4.56832964 L10.2784747,0.295011084 C10.6722974,-0.0983370279 11.3108102,-0.0983370279 11.704633,0.295011084 C12.0984557,0.688359195 12.0984557,1.32610249 11.704633,1.7194506 L6.71307912,6.70498892 C6.3192564,7.09833703 5.6807436,7.09833703 5.28692088,6.70498892 L0.295367042,1.7194506 C-0.0984556808,1.32610249 -0.0984556808,0.688359195 0.295367042,0.295011084 Z"></path>
              </svg>
            )}
          </div>
        )}
      </div>

      {menu.dropdowns && (
        <ul
          className={`space-y-5 overflow-hidden transition-all duration-500 ${
            isOpen ? "max-h-[400px] pb-5" : "max-h-0"
          }`}
        >
          {menu.dropdowns?.map((dropdown) => (
            <li key={dropdown.title}>
              <div className="flex items-center bg-white">
                <div className="w-[120px] h-20 bg-[#d93751]"></div>
                <div className="flex items-center flex-1 gap-x-5 px-5">
                  <div className="flex-1 text-sm text-[#4c433f]">
                    <h4>{dropdown.title}</h4>
                    <h5 className="mt-1 leading-tight">
                      {dropdown.description}
                    </h5>
                  </div>
                  <div className="rotate-180">
                    <svg viewBox="0 0 40 40" className="w-6 h-6">
                      <g transform="translate(5.000000, 5.000000)">
                        <path
                          d="M30,15 C30,15.4807835 29.627203,15.8770378 29.1469257,15.9311926 L29.0343052,15.9374971 L3.20017573,15.9367054 L15.3022515,28.4199682 C15.6677828,28.797006 15.6492627,29.3903257 15.2608856,29.7451848 C14.9023837,30.0727471 14.3540519,30.0826245 13.9843141,29.7856554 L13.8958136,29.7050268 L0.262475843,15.6425293 C-0.058327965,15.311627 -0.0850616157,14.8108998 0.182274891,14.4516934 L0.262475843,14.3574707 L13.8958136,0.294973235 C14.261345,-0.0820645885 14.8725086,-0.100043974 15.2608856,0.254815155 C15.6193876,0.582377427 15.6627451,1.11312505 15.3797938,1.48939075 L15.3022515,1.58003182 L3.20210712,14.0617057 L29.0343052,14.0624975 C29.5676437,14.0624975 30,14.4822331 30,15 Z"
                          className="fill-[#4c433f]"
                        ></path>
                      </g>
                    </svg>
                  </div>
                </div>
              </div>
            </li>
          ))}
        </ul>
      )}
    </li>
  );
}

export default NavItem;
